version: 3
automerge: true
parallel_plan: true
parallel_apply: true
projects:
  - dir: .
    workspace: default
    autoplan:
      when_modified: [ "*.tf" ]
      enabled: true
    workflow: my-workflow
workflows:
  my-workflow:
    plan:
      steps:
        - run: echo "*** CLIENT - BEFORE INIT ***"
        - init
        - plan:
            extra_args: [ "-lock", "false" ]
        - run: echo "*** CLIENT - AFTER INIT ***"
    apply:
      steps:
        - run: echo "*** CLIENT - BEFORE APPLY ***"
        - apply
        - run: echo "*** CLIENT - AFTER APPLY ***"
